\documentclass[a4paper, twoside, 11pt, czech, american]{book} % ASI template settings with 11pt instead of 12pt

%%% Packages:
%% Necessary packages:
\usepackage[T1]{fontenc}							% Font encoding
\usepackage[utf8]{inputenc}							% Input encoding
%\usepackage[a4paper, hmarginratio=3:2]{geometry}	% Use of the A4 page and setting the margins (the binding will be wider) ()
\usepackage[a4paper]{geometry}

%% Other packages:
% Code:
\usepackage{listings} 					% Code formatting package

% Fonts:
\usepackage{amsmath}  					% Advanced mathematic package
\usepackage{mathtools}					% Mathematics tools
\usepackage[table,xcdraw]{xcolor}    	% Colorful text
\usepackage{soul}						% Text fonts syllable by syllable - used for in-text codifying
\usepackage[varg]{txfonts}				% Times New Roman fonts and math alphabets, for example, provides \mathbb{}
\usepackage{csquotes}					% Ensure that quoted texts are typeset according to the rules of the main language
\usepackage{microtype}					% Reduce text overflowing margins
\usepackage{xurl}						% URL formatting: better linebreaks in footnotes, etc.
\usepackage[shortcuts]{extdash} 		% Unbreakable dashes
\usepackage{tocloft}					% Dots in table of contents
\renewcommand\cftchapdotsep{\cftdotsep} % Dots in table of contents - activate
\usepackage{siunitx}									 % For correct typesetting of the scientific notation
\sisetup{output-exponent-marker=\ensuremath{\mathrm{e}}} % Set up exponent marker for 'e-' - see https://tex.stackexchange.com/a/269848/182615
\sisetup{retain-explicit-plus=true}						 % Set up exponent marker for 'e+' 

% Format pages:
\usepackage{pdfpages}					% Add PDFs into compiled PDF
\pdfsuppresswarningpagegroup=1			% Supprress warnings when multiple PDF documents are included in one page - see https://tex.stackexchange.com/a/78020/182615

% Graphics:
\usepackage{float} 			  			% Advanced figure placement options
\usepackage{caption} 					% Captions of figures, tables, etc.
\usepackage{subcaption}					% Sub-captions of figures, tables, etc.
\usepackage{nicematrix}					% Visual representation of matrices - experimental
\usepackage{tikz}						% Visual representation of matrices, graphs etc.
\usetikzlibrary{
	external,							% Externalize tikz pictures to avoid recompiling them with every compilation
	decorations.pathreplacing,			% Curly braces in tikz figures
	positioning,						% Advanced relative positioning
	shapes.arrows,						% Advanced arrow shapes
	arrows.meta,						% Advanced arrows
	calc								% Calculate point coordinates
}
\tikzexternalize[						% Add '-shell-escape' to the pdflatex compilation command. In TeXstudio: Options -> Configure Texstudio... -> Commands -> PdfLaTeX: 'pdflatex --synctex=1 -interaction=nonstopmode -shell-escape %.tex'
prefix=images/tikz/,				% Place externalized TikZ-generated images in a specific folder - ignored by git
optimize command away=\includepdf	% Optimize away including pdf pages to avoid compatibility issues of the 'pdfpages' package and the 'external' tikz library
]
\usepackage{pgfplots} 					% For visualizations, graphics, etc.
\usepackage{pgfplotstable}				% For reading data from csv files (tables)
\pgfplotsset{compat=1.3}				% Use pgfplots version 1.3 specifically
\usepackage{multirow}					% Merge rows of a table

% Languages:
\usepackage[czech, american]{babel}							 % Czech and American English are used in this document
\usepackage{silence}										 % Silence output of warnings
\WarningFilter{biblatex}{File 'american-iso.lbx' not found!} % Silence weird message that I couldn't find a solution for

% Referencing:
\usepackage{footmisc} 							 		  	% Refer to footnotes that already exist & support for multiple footnotes
\usepackage[
backend=biber,								  		  	% In TeXstudio, the backend here must correspond to: Options -> Configure TeXstudio... -> Build -> Default Bibliography Tool
style=iso-numeric,
sorting=none,
giveninits=true]{biblatex}								% Bibliography: ISO 690 format, cite shows numbers, sort according to occurrence in the text, shorten first names
\addbibresource{chapters/bibliography.bib}				  	% Specify path to bibliography file
\DeclareFieldFormat{labelnumberwidth}{\mkbibbrackets{#1}}	% Square brackets around numbers in the bibliography
\DeclareFieldFormat*{citetitle}{\mkbibemph{#1}}				% \citetitle{bibid} in text produces the title in emphasis for all sources. Without this, for example, the 'thesis' citation entry is non-emphasized with quotes while online sources are only emphasized (looks bad)
\setcounter{biburllcpenalty}{7000}						  	% Insert breakpoints after lowercase letters in URLs in the bibliography
\setcounter{biburlucpenalty}{8000}						  	% Insert breakpoints after uppercase letters in URLs in the bibliography
\usepackage{quoting}										% Quotes with custom vspaces around them
\quotingsetup{vskip=0pt}									% Defines global settings for quotes

% Tables:
\usepackage{tabularx}			 % Advanced table options
\usepackage{colortbl} 			 % Table cell color
\usepackage{tablefootnote}		 % Footnote in tables

% Fonts (must be mentioned last to avoid warnings in the log)
\usepackage[hidelinks]{hyperref} % Hide square around URL link

%%% Document settings:
% TODO: Play around with the following if the formatting of pages turns out weird
\widowpenalty=9500 	   % Completely avoid widows (last lines of paragraph on a new page)
\clubpenalty=9500 	   % Completely avoid orphans (first lines of a new paragraph on the bottom of a page)
\brokenpenalty=9500    % Prohibit page breaks after a line that has a split word at the end

% ASI template settings
\topmargin=-15mm      % Top margin slightly smaller
\textwidth=150mm      % Width of text on the page
\textheight=240mm     % "Height" of text on the page

\pagenumbering{arabic} % Page numbering in Arabic numerals
\pagestyle{plain}      % Page numbering at the bottom center

\parindent=0pt 		   % Indentation of the 1st line of the paragraph
\parskip=7pt   		   % Space between paragraphs

\setlength{\emergencystretch}{20.0pt} % Allow compiler to create more spaces between words to avoid overflow of text


%%% Custom colors:
\definecolor{nvidia}{rgb}{0.6, 0.73, 0.35}		% Nvidia color
\definecolor{nvidia-light}{rgb}{0.92, 1.0, 0.85} % Nvidia light color
\definecolor{gray-light}{gray}{0.95}			% In-text code highlighting color
\definecolor{lbcolor}{rgb}{0.9,0.9,0.9}			% Code block background color
\definecolor{green-dark}{rgb}{0.0, 0.2, 0.13}	% Code block comments color


%%% Custom code block:
\lstset{
	backgroundcolor=\color{lbcolor}, % Background color of the code block
	upquote=true,					 % Format of quote: true -> '', false -> ‘’
	columns=fixed,					 % Characters are below each other (each column is one character -> fixed column size)
	extendedchars=false,			 % Allow national characters, for example, Czech diacritics. If true, then load any package that defines the characters, for example, fontenc, or inputenc, etc.
	showtabs=false,					 % Tabulators visible or not
	showspaces=false,				 % All blank spaces visible as _ or not
	showstringspaces=false,			 % Blank spaces in strings visible as _ or not 
	identifierstyle=\ttfamily,		 % Code font to be monospace if the line begins with one of the following: a-z, A-Z, @, $ and _
	language=C++,					 % Default language syntax highlighting for code blocks
	captionpos=b,					 % Position of the caption. b - bottom; t - top of the listing
	tabsize=2,						 % Set tabulator stops			
	frame=lines,					 % Draw a line on the top and bottom of the code listing -> frame
	numbers=left,					 % Print line numbers on the left of the code block
	numberstyle=\tiny,				 % Font and size of line numbers
	numbersep=5pt,					 % Distance between line numbers and the code block
	basicstyle=\footnotesize,		 % Basic font. Selected at the beginning of each listing
	keywordstyle=\color[rgb]{0,0,1}, % Fond of language keywords in a specific font
	commentstyle=\color{green-dark}, % Font of comments in code block
	stringstyle=\color{red},		 % Font of non-keywords, comments and strings
	breaklines=true,				 % Breaking of long lines
	prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}}, % Line-break symbol if a line of code is too long
}
% Extend C++ with CUDA keywords - not supported in lstlisting by default.
\lstset{
	morekeywords={__global__},
	morekeywords={__device__},
	morekeywords={blockDim.x},
	morekeywords={blockDim.y},
	morekeywords={blockIdx.x},
	morekeywords={blockIdx.y},	
	morekeywords={threadIdx.x},
	morekeywords={threadIdx.y},
	morekeywords={gridDim.x},
	morekeywords={__shared__},
	morekeywords={dim3},
	alsoletter={.}			   % Make the font be applied for dots
}


%%% Custom math operators:
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclarePairedDelimiter\parens{\lparen}{\rparen}
\newcommand{\minp}[1]{\min\parens*{#1}}

%%% Custom commands:
\DeclareRobustCommand{\code}[1]{{\begingroup\sethlcolor{gray-light}\hl{\texttt{#1}}\endgroup}} % Shortcut for code font in text
\soulregister{\code}{1}																		   % Codeify inline text character by character
\newcommand{\namerefItalics}[1]{\textit{\nameref{#1}}}										   % Nameref with italics font
\newenvironment{tight_enumerate}{															   % Define new enumerate with smaller spaces between items
	\begin{enumerate}
		\setlength{\itemsep}{0pt}
	}{\end{enumerate}}
\newenvironment{tight_itemize}{															  	   % Define new itemize with smaller spaces between items
	\begin{itemize}
		\setlength{\itemsep}{0pt}
	}{\end{itemize}}

%% Status of writing:
\newcommand{\TODO}{\textcolor{red}{TODO}}   		   % To-Do command
\newcommand{\TO}{\textcolor{nvidia}{TO}} 			   % Writing to-be checked by the supervisor (Tomas Oberhuber)


%%% Constants
\newcommand{\cvut}{České vysoké učení technické v Praze}
\newcommand{\fjfi}{Fakulta jaderná a fyzikálně inženýrská}
\newcommand{\ksi}{Katedra softwarového inženýrství}
\newcommand{\programme}{Aplikace přírodních věd}
\newcommand{\specialization}{Aplikace softwarového inženýrství}

\newcommand{\kind}{Diplomová práce}

\newcommand{\logoCVUT}{\includegraphics{images/title/cvut_logo_contour_version.pdf}}

% The following was filled in accordance with the original task paper
\newcommand{\titleCZ}{Paralelní výpočet LU rozkladu na GPU pro numerické řešení parciálních diferenciálních rovnic}					 % Czech title of the project
\newcommand{\titleEN}{Parallel Computation of LU Decomposition on GPUs for the Numerical Solution of Partial Differential Equations} % English title of the project
\newcommand{\paperAuthor}{Bc. Lukáš Matthew Čejka}   		 % Name and surname, including academic titles
\newcommand{\supervisor}{doc. Ing. Tomáš Oberhuber, Ph.D.} 	 % Name and surname of supervisor, including academic titles
\newcommand{\supervisorWorkspace}{\ksi, \fjfi, \cvut} 		 % Workplace of supervisor

\newcommand{\consultant}{--} 								 % Consultant's name, surname and academic titles, if I have a consultant
\newcommand{\consultantWorkspace}{--} 						 % Consultant's workplace, if I have a consultant

\newcommand{\yearSubmitted}{2023}  							 % Year of handing in the thesis (not the academic years)
\newcommand{\place}{Praze} 									 % City of studying

\newcommand{\keywordCZ}{Paralelní LU rozklad s tzv. pivotingem, Iterativní metody, Grafická karta (GPU), Compute Unified Device Architecture (CUDA), Template Numerical Library (TNL), High-Performance Computing (HPC), Porovnání výkonu, Porovnání přesnosti, cuBLAS, cuSOLVER, BDDCML}
\newcommand{\keywordEN}{Parallel LU decomposition with Pivoting, Iterative methods, Graphics Processing Unit (GPU), Compute Unified Device Architecture (CUDA), Template Numerical Library (TNL), High-Performance Computing (HPC), Performance comparison, Accuracy comparison, CuBLAS, cuSOLVER, BDDCML}
\newcommand{\abstractCZ}{Tato diplomová práce se zaměřuje na implementaci iterativního paralelního LU rozkladu s tzv. pivotingem (LUP) na grafické karty (GPU) Nvidia. Primárním cílem této práce je aplikovat implementaci jako předpodmíňovač v existující knihovně a analyzovat její výkon. Za tímto účelem byl vyvinut projekt zahrnující postupy řešení soustav rovnic pomocí LUP spolu s jednotkovými a vykonnostními testy. Dále byl projekt integrován do víceúrovňové knihovny BDDC řešičů. Výkonnostní testy porovnávaly implementaci algoritmu s existujícími knihovnami GPU z hlediska výkonu a přesnosti na moderním výpočetním systému. Na základě komplexní analýzy výsledků výkonnostních testů byla vydána doporučení týkající se vhodnosti implementací pro obecné a účelové použití.}
\newcommand{\abstractEN}{This diploma thesis focuses on the implementation of an iterative parallel LU decomposition algorithm with Pivoting (LUP) for Nvidia Graphics Processing Units (GPUs). The primary objectives of this thesis are to apply the implementation as a preconditioner in an existing library and analyze its performance. For this purpose, a project was developed, encompassing procedures for solving systems of equations using LUP, along with unit tests and a benchmarking framework. Furthermore, the project was integrated into a multilevel BDDC solver library. The benchmarks conducted compared the implementation of the algorithm to established GPU libraries in terms of performance and accuracy on a state-of-the-art High-Performance Computing (HPC) cluster. Based on a comprehensive analysis of the benchmark results, recommendations were made regarding the suitability of the implementations for general use and specific problems.}

% Declaration in Czech
\newcommand{\declarationCZ}{Prohlašuji, že jsem svou diplomovou práci vypracoval samostatně a použil jsem pouze podklady (literaturu, projekty, SW atd.) uvedené v přiloženém seznamu.}

% Declaration in English (translation of the Czech declaration)
\newcommand{\declarationEN}{I declare that I have carried out my Master's Degree Project independently and I have used only the materials (literature, projects, software, etc.) listed in the bibliography.}

% Acknowledgement in Czech
\newcommand{\acknowledgmentCZ}{Chtěl bych poděkovat doc. Ing. Tomáši Oberhuberovi, Ph.D. za vedení mé diplomové práce a za podnětné návrhy, které ji obohatily. Dále bych rád poděkoval Ing. Jakubu Šístkovi, Ph.D. a Ing. Danielu Večerkovi za sdílené znalosti a výpomoc. Poděkování patří také zpřístupnění výpočetní infrastruktury projektu financovaného OP VVV CZ.02.1.01/0.0/0.0/16\_019/0000765 ``Výzkumné centrum informatiky''.}

% Acknowledgement in English (translation of the Czech acknowledgement)
\newcommand{\acknowledgmentEN}{I would like to thank doc. Ing. Tomas Oberhuber, Ph.D. for supervising my master's thesis and for the inspiring proposals that enriched it. Additionally, I would like to express my gratitude to Ing. Jakub Šístek, Ph.D. and Ing. Daniel Večerka for sharing their knowledge and providing assistance. The access to the computational infrastructure of the OP VVV funded project CZ.02.1.01/0.0/0.0/16\_019/0000765 ``Research Center for Informatics'' is also gratefully acknowledged.}




\begin{document}
\shorthandoff{-} % This prevents issues with the 'czech' package: https://tex.stackexchange.com/questions/477449/incomplete-iffalse-related-listlisting-textit-and-textcolor




%%%%%%%%%%%% TITLE PAGE %%%%%%%%%%%%
\thispagestyle{empty}
\selectlanguage{czech}%

\begin{center}
	{\LARGE
		\cvut\par
		\fjfi
	}
	\vspace{10mm}
	
	\begin{tabular}{c}
		\textbf{\ksi} \\[3pt]   
		\textbf{Obor: \specialization}\\
	\end{tabular}
	
	\vspace{10mm} \logoCVUT \vspace{15mm} 
	
	{\huge \textbf{\titleCZ}\par}
	\vspace{5mm}
	\selectlanguage{american}%
	{\huge \textbf{\titleEN}\par}
	\selectlanguage{czech}%
	
	\vspace{15mm}
	{\Large \MakeUppercase{\kind}}
	
	\vfill
	{\large
		\begin{tabular}{ll}
			Vypracoval: & \paperAuthor\\
			Vedoucí práce: & \supervisor\\
			Rok: & \yearSubmitted
		\end{tabular}
	}
\end{center}

\clearpage{\pagestyle{empty}\cleardoublepage} % Empty page after the title page - no numbering




%%%%%%%%%%%% TASK PAPER %%%%%%%%%%%%
\newpage  			  % DO NOT TOUCH!
\thispagestyle{empty} % DO NOT TOUCH!

% Task paper scanned as a 2-page PDF:
\includepdf[pages={1, 2}]{resources/masters_thesis_assignment_lukas_matthew_cejka.pdf}




%%%%%%%%%%%% DECLARATION %%%%%%%%%%%%
\newpage 			  % DO NOT TOUCH!
\thispagestyle{empty} % DO NOT TOUCH!

% Task paper scanned as a 2-page PDF:
\includepdf[pages={1}]{resources/signed_declaration_lukas_matthew_cejka.pdf}




%%%%%%%%%%%% ACKNOWLEDGEMENT  %%%%%%%%%%%%
\newpage
\thispagestyle{empty}

~
\vfill % Empty fill

\textbf{Poděkování}

\vspace{1em} 				% Vertical space. % DO NOT TOUCH!
\acknowledgmentCZ

\selectlanguage{american}%
\vspace{1em}
\textbf{Acknowledgment}

\selectlanguage{czech}%
\vspace{1em} 				% Vertical space. % DO NOT TOUCH!
\acknowledgmentEN
\begin{flushright}
	\paperAuthor
\end{flushright}  			% Acknowledgement page ends here




%%%%%%%%%%%% ABSTRACT %%%%%%%%%%%% 
\newpage   			  % DO NOT TOUCH!
\thispagestyle{empty} % DO NOT TOUCH!

% Preparation: DO NOT TOUCH the next 8 lines!
\newbox\odstavecbox
\newlength\vyskaodstavce
\newcommand\odstavec[2]{%
	\setbox\odstavecbox=\hbox{%
		\parbox[t]{#1}{#2\vrule width 0pt depth 4pt}}%
	\global\vyskaodstavce=\dp\odstavecbox
	\box\odstavecbox}
\newcommand{\delka}{120mm} % Text width in 2nd table column

% Using the preparation: DO NOT TOUCH commands inside the "tabular" section!
\begin{tabular}{ll}
	{\em Název práce:} & ~ \\
	\multicolumn{2}{l}{\odstavec{\textwidth}{\bf \titleCZ}} \\[1em]
	{\em Autor:} & \paperAuthor \\[1em]
	{\em Studijní program:} & \programme \\
	{\em Obor:} & \specialization \\
	{\em Druh práce:} & \kind \\[1em]
	{\em Vedoucí práce:} & \odstavec{\delka}{\supervisor\\ \supervisorWorkspace} \\
	{\em Konzultant:} & -- %\odstavec{\delka}{\consultant \\ \consultantWorkspace}  % TODO: Remove the text "-- %" if you had a consultant
	\\[1em]  
	\multicolumn{2}{l}{\odstavec{\textwidth}{{\em Abstrakt:} ~ \abstractCZ  }} \\[1em]
	{\em Klíčová slova:} & \odstavec{\delka}{\keywordCZ} \\[2em]
	\selectlanguage{american}%
	{\em Title:} & ~\\
	\multicolumn{2}{l}{\odstavec{\textwidth}{\bf \titleEN}}\\[1em]
	{\em Author:} & \paperAuthor \\[1em]
	\multicolumn{2}{l}{\odstavec{\textwidth}{{\em Abstract:} ~ \abstractEN  }} \\[1em]
	{\em Key words:} & \odstavec{\delka}{\keywordEN}
\end{tabular}




%%%%%%%%%%%% CONTENTS OF THE PAPER %%%%%%%%%%%%
\selectlanguage{american}%
\newpage  		 % DO NOT TOUCH!
\parskip=0pt
\tableofcontents % DO NOT TOUCH!
\parskip=7pt
\newpage 		 % DO NOT TOUCH!




%--------------------------------------------------------
%|         The PAPER ITSELF begins here                 |
%--------------------------------------------------------

\include{chapters/introduction}

\include{chapters/chapter01}

\include{chapters/chapter02}

\include{chapters/chapter03}

\include{chapters/conclusion}

\printbibliography[heading=bibintoc]

\include{chapters/appendices}

% Write out all citation in the bibliography - even if they're not cited in the text
% This must be last so that citation numbering depends on the order the entries were cited in. Then the remaining non-cited entries can be printed in the bibliography
\nocite{*}
	
\end{document}